==================================================AppIntents
@Dependency private var vpnStateStore: VPNStateStore
@Dependency 不是自动生效的，
你必须在 App 启动时，把 VPNStateStore 注册进 AppDependencyManager。

如果
struct ToggleVPNIntent: AppIntent {
    let store = VPNStateStore.shared // ❌
}
这会导致：
Intent 代码无法复用
强耦合到具体实现
违反 Intent 的“无上下文”设计

iOS 中的AppDependencyManager 只能「注册」依赖，
不能「查询 / resolve」依赖。没有AppDependencyManager.shared.resolve(...)
AppDependencyManager：
它是给 AppIntent / Shortcuts / Siri 用的，不是通用 DI 容器。
App
  ├── 自己持有依赖实例
  └── 把同一个实例「登记」给 AppIntent 系统
它是“单向注册”


Singleton：
“我自己决定我只有一个。”

Dependency + Single Instance：
“系统决定你现在只有一个。”

这是架构层级完全不同的决定。

单例语义（Single Instance）
≠
Singleton 设计模式（static shared）


可以用 Singleton 的场景:
FileManager.default
NotificationCenter.default
URLSession.shared
纯工具 / 无状态 / 系统级服务
不适合用 Singleton 的场景:
共享业务状态
Intent / UI / Manager 共用
生命周期复杂
需要 mock / 扩展


