“SACK（Selective Acknowledgment，可选择性确认）” 是 TCP 中一个非常重要的优化机制，
它用来解决普通 ACK（累计确认） 的效率问题。


普通 ACK 是怎么工作的:
在 TCP 传输中，接收端通过 ACK 告诉发送端：
“我已经收到了 从起点到某个序号之前 的所有字节。”
例如：
[发送端] → 发送字节序号：1~1000
[接收端] → 收到 1~500，ACK=501
这表示：
我收到了 1~500，期待下一个是 501。
如果中间有丢包，比如：
已收到：1~500 和 601~1000
丢失：501~600
普通 TCP（无 SACK）会怎么做？
👉 它只能告诉对方“我只收到了 1~500”（ACK=501）
发送端就会以为之后的数据全都丢了，于是重传 501~1000。
这就浪费了网络资源，因为其实 601~1000 是收到的。


SACK 的作用
SACK = Selective Acknowledgment（选择性确认）
顾名思义，它允许接收方告诉发送方：
“我收到了哪些段，哪些没收到。”
用上面的例子：
SACK 信息 = [601-1000] 表示这段数据其实已收到
于是发送端只需要重传丢失的 [501-600]，
不用再传 [601-1000]，大大提高效率


在 TCP 选项字段中，出现这样的项：
options [sackOK]
sackOK：表示在三次握手时，双方协商支持 SACK。
握手完成后，后续报文里就可以携带实际的 SACK 块（SACK blocks）：
options [SACK 601-1000]
这告诉发送端：
“501-600 没收到，但 601-1000 已收到。”


举个实际例子
IP A > B: Flags [.], ack 501, win 65535, options [sack 601-1000]
解释：
ack 501：表示收到了 1~500
sack 601-1000：表示虽然 501~600 丢了，但 601~1000 已经收到了


| 名称     | 英文全称                     | 含义        | 作用               |
| ------ | ------------------------ | --------- | ---------------- |
| ACK    | Acknowledgment           | 累积确认      | 告诉对方收到了到某点之前的数据  |
| SACK   | Selective Acknowledgment | 可选择确认     | 告诉对方哪些段收到了、哪些没收到 |
| sackOK | TCP 选项                   | 表示支持 SACK | 握手时协商能力          |
