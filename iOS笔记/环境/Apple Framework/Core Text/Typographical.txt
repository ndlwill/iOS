==================================================Characters and Glyphs(字符和字形)
Although characters must be represented in a display area by a recognizable shape, they are not identical to that shape. 
That is, a character can be drawn in various forms and remain the same character. 
For example, an “uppercase A” character can be drawn with a different size or a different stroke thickness, it can lean or be vertical, and it can have certain optional variations in form, such as serifs. 
Any one of these various concrete forms of a character is called a glyph. 
xxx1(Glyphs of the character A) shows different glyphs that all represent the character “uppercase A.”


#####
Characters and glyphs do not have a one-to-one correspondence. 
In some cases a character may be represented by multiple glyphs, 
such as an “é” which may be an “e” glyph combined with an acute accent glyph “´”. 

In other cases, a single glyph may represent multiple characters, as in the case of a ligature, or joined letter. 
xxx2(Ligatures) shows individual characters and the single-glyph ligature often used when they are adjacent.
#####

#####
Computers store characters as numbers mapped by encoding tables to their corresponding characters.

The glyphs used to depict characters are selected by the layout manager during composition and layout processing.
The layout manager determines which glyphs to use and where to place them in the display, or view.
#####

UIFont 表示的是“字体（Font）”，不是字形（Glyph）
字形是字体内部用于绘图的矢量形状，需要用 CoreText / CGFont 获取。


==================================================Typefaces and Fonts
A typeface is a set of visually related shapes for some or all of the characters in a written language. 
For example, Times is a typeface, designed by Stanley Morrison in 1931 for The Times newspaper of London.

A typestyle（字体样式）, or simply style, is a distinguishing visual characteristic of a typeface. 
For example, roman typestyle is characterized by upright letters having serifs and stems thicker than horizontal lines. 
In italic typestyle, the letters slant to the right and are rounded, similar to cursive or handwritten letter shapes. 
#####
A typeface usually has several associated typestyles.
#####

A font is a series of glyphs depicting the characters in a consistent size, typeface, and typestyle. 
A font is intended for use in a specific display environment. 
Fonts contain glyphs for all the contextual forms, such as ligatures, as well as the normal character forms.

A font family is a group of fonts that share a typeface but differ in typestyle. 
So, for example, Times is the name of a font family (as well as the name of its typeface). 
Times roman and Times Italic are the names of two individual fonts belonging to the Times family. 
xxx shows several of the fonts in the Times font family.

Styles, also called traits, include variations such as bold, italic, condensed, expanded, narrow, small caps, poster fonts, 
and fixed pitch. The text system includes objects called font descriptors, which provide font-matching capability, 
so that you can partially describe a font by creating a font descriptor with, for example, 
just a family name or weight, and you can then find all the fonts on the system that match the given trait.


Typeface（Times）
   └── Typestyle（Roman / Italic / Bold）
         └── Font（Times-Roman.ttf / Times-Italic.ttf）
Font Family（Times）：包含所有 typestyle 对应的一批 font files

Typeface：字形设计的“设计风格” // Typeface 指的是“字形设计”本身，是一套视觉上统一的字形（letter shapes）的设计。强调的是“设计风格”
Typestyle：在这个设计风格上的“变体”（粗体/斜体等）// Typestyle 是 typeface 的一个“风格变种”。给 typeface 加上风格修饰：Italic（斜体）、Bold（粗体）
Font：实际的字体文件（含 glyph） // （字体文件 / 字形集）Font 是一个具体的“字形文件”，包含在某种 typeface + typestyle + size 下的实际 glyph（字形）。
Font family：一组相关字体文件的集合（同一个 typeface）// Font Family 是拥有同一 typeface 的一组字体（fonts）。


Font 是否包含 kerning（字偶距）？
是的，大多数现代字体都会在字体文件内包含 kerning 数据。
字体里的 kerning 信息来自哪？
OpenType 字体：GPOS 表（Glyph Positioning Table）
TrueType 字体：旧的 kern 表，新字体也会使用 GPOS
这些表告诉排版系统：
某两个字形（glyph）放在一起时应该额外靠近一点或离远一点。
例如：
A + V → 要靠近
T + o → 要靠近
这些 kerning 信息都在字体文件内

| 内容               | 在 font 中？ | OpenType 表       | 是否所有字体都有？  |
| ---------------- | --------- | ---------------- | ---------- |
| **kerning**      | ✔️ 是      | `GPOS` 或旧 `kern` | 大多数字体都有    |
| **ligature（连字）** | ✔️ 可以有    | `GSUB`           | 看字体设计者是否提供 |

kerning、ligature 属于排版规则（layout rules）


字体文件包含：
1. 字形（glyph）轮廓
2. 排版规则（GPOS/GSUB）：
kerning
连字
上下标
数字形式（比例/等宽/表格）
标点位置调整
……


==================================================Text Layout
Text layout is the process of arranging glyphs on a display device, in an area called a text view, 
which represents an area similar to a page in traditional typesetting.

The order in which glyphs are laid out relative to each other is called text direction. // #####

In English and other languages derived from Latin, glyphs are placed side by side to form words that are separated by spaces.

Words are laid out in lines beginning at the top left of the text view proceeding from left to right until the text reaches the right side of the view.

Text then begins a new line at the left side of the view under the beginning of the previous line, and layout proceeds in the same manner to the bottom of the text view.


Moreover, some apps call for arbitrary arrangements of glyphs; 
for example, in a graphic design context, a layout may require glyphs to be arranged on a nonlinear path.


#####
To create lines from a string of glyphs, 
the layout engine must perform line breaking by finding a point at which to end one line and begin the next.

The layout manager lays out glyphs along an invisible line called the baseline.

// 字形设计师会为字体提供一组测量数据（称为度量），用于描述字体中每个字形周围的间距。
###Glyph designers provide a set of measurements with a font, called metrics, which describe the spacing around each glyph in the font.###
The layout manager uses these metrics to determining glyph placement.
In horizontal text, the glyph has a metric called the advance width, 
which measures the distance along the baseline to the origin point of the next glyph.
Typically there is some space between the origin point and the left side of the glyph, which is called the left-side bearing.
There may also be space between the right side of the glyph and the point described by the advance width, which is called the right-side bearing.
The vertical dimension of the glyph is provided by two metrics called the ascent and the descent.
The ascent is the distance from the origin (on the baseline) to the top of the tallest glyphs in the font. 
The descent, which is the distance below the baseline to the bottom of the font’s deepest descender.
The rectangle enclosing the visible parts of the glyph is called the bounding rectangle or bounding box.
#####


#####
Type systems usually measure font metrics in units called points, 
which measure exactly 72 per inch in most computer typesetting systems.
// 字体的上升距离和下降距离相加即可得到字体的点数
Adding the distance of the ascent and the descent of a font provides the font’s point size.

// 上升距离、下降距离和行距的总和即为字体的行高
The total amount of ascent plus descent plus leading provides a font’s line height. 
(Leading is sometimes also called linegap. 
It is often specified as a ratio of a font’s point size over the line height at which a block of text is set, such as 14/16.5.)
#####


Kerning:
By default, in horizontal text, typesetters place glyphs side-by-side using the advance width, 
resulting in a standard interglyph space. 
However, in some combinations, text is made more readable by kerning, which is shrinking or stretching the space between two glyphs.


Alignment of text relative to margins:
For example, the margins are the areas of white space between the edges of the page and the text area where the layout engine places glyphs.
Alignment describes the way text lines are placed relative to the margins. 


Justified text: // 两端对齐文本
Lines of text can also be justified; for horizontal text the lines are aligned on both right and left margin by varying interword and interglyph spacing
The system performs alignment and justification, if requested, after the text stream has been broken into lines and hyphens added and other glyph substitutions made.