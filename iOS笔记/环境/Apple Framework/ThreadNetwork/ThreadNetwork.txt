https://developer.apple.com/documentation/ThreadNetwork

ThreadNetwork
Create robust, smart device networks using Thread Border Routers.
iOS 15.0+


#####
Thread: 一种为智能家居设计的网络协议

https://www.threadgroup.org/
是一种用于 IoT（物联网）设备的 网络协议，称为 Thread
多家业界大厂作为初始成员，包括 ARM、NXP、Nest、OSRAM、Samsung、Qualcomm 等，苹果公司于 2018 年 8 月加入，并于 2020 年发布首款 Thread 产品——HomePod Mini
Thread 常用作 **Matter 协议（新的智能家居标准）**的传输方式，这一组合被称为 “Matter over Thread”，提升设备之间的互联互通性

Thread 是一种基于 IPv6 的 低功耗无线网状（mesh）网络协议，专门用于智能家居设备间的连接，具有以下特点：
支持低延迟、低功耗通信
构建可靠的网状结构，避免单点故障
提供更广覆盖范围和更高传输效率，相比蓝牙等更适用于智能灯、锁、恒温器、传感器等设备

The Thread standard is a low-power, wireless mesh networking protocol that runs over standard Internet protocols that allows smart home devices — such as Apple Home—compatible devices — to communicate with each other.
Mesh networks are peer-to-peer networks that don’t have a single, centrally defined router, eliminating the risk of a single point of failure.
They can dynamically reconfigure themselves and discover nearby peer devices with shared credentials.
This allows them to maintain communication even when some devices go offline
#####

2022 年 Matter 1.0 发布时，官方明确支持两种传输方式：
Wi-Fi（高带宽）
Thread（低功耗、mesh 网络）
这意味着只要设备标注 Matter over Thread，不同厂商的设备就可以互通。
因此 Thread 的地位相当于 智能家居互操作的底层基石。

#####
在 IoT 场景下，Thread 已经取代了很多早期封闭或半开放的协议（如 Zigbee、Z-Wave），成为未来 智能家居的“公认主流规范”之一。
现在如果厂商要做支持 Matter 的设备，几乎都会选择支持 Thread。
#####


Matter：是一个 应用层协议（Application Layer Protocol），负责定义设备发现、配对、安全、互操作、控制命令等内容。
Thread：是一个 网络层/传输层协议（Networking Protocol），负责 设备之间的低功耗无线通信，基于 IPv6 over 802.15.4。
可以简单类比：
Matter ≈ “语言/规则”
Thread ≈ “通信管道/网络”


Matter 本身不限定物理网络，它可以跑在不同传输层之上：
Wi-Fi → 高带宽、适合视频流、语音助手
Ethernet → 固定有线连接
Thread → 
#####
所以 Matter over Thread 就是把 Matter 应用层协议封装在 Thread 网络里跑。
#####

现在智能家居生态里常见的组合是：
Matter + Wi-Fi（高带宽设备，比如摄像头）
Matter + Thread（低功耗设备，比如灯泡、门锁、传感器）


#####
The robustness of Thread relies on member devices forwarding packets to their neighbors; 
this creates a mesh that strengthens and increases its reliability as people add more devices.

The Thread Border Router hardware device is a key element of Thread networks. // Thread 边界路由器硬件设备是 Thread 网络的关键元素
It routes IP traffic between Thread and Wi-Fi or Ethernet networks, and enables iOS devices to communicate with Thread devices. // 它在 Thread 与 Wi-Fi 或以太网之间路由 IP 流量，并使 iOS 设备能够与 Thread 设备通信
HomePod and HomePod mini are examples of Border Routers.
#####


#####
Learn about Thread network device roles:
A Thread network can contain several types of devices that someone can deploy in many combinations:

Thread Border Router
A device that provides a connection between the Thread network and an existing WiFi or Ethernet network. 
These devices may be standalone, acting solely as routers, or they may support additional functionality. 
For example, HomePod (second Generation), HomePod Mini, and AppleTV 4K are all examples of Thread Border Routers.

Thread Leader
A device that manages routers on a Thread network. A Thread network can only have one Thread Leader at any time; 
member devices select a Thread Leader based on various routing characteristics of the network in order to optimize performance.

End device
Thread devices located at the endpoints of a Thread network. They can communicate directly with other Thread devices, 
but don’t operate as routers forwarding packets on their behalf.

Sleepy End device
End devices that run in low-power mode and are often battery powered. 
To conserve power they generally only wake up occasionally (which is why they’re referred to as “sleepy”) to report whatever data the device collects. Examples of sleepy devices include battery-powered temperature sensors or air quality monitors.
#####


// OpenThread
https://openthread.io/guides?hl=zh-cn
// Thread
https://www.threadgroup.org/What-is-Thread/Overview


==================================================构建可靠的网状结构，避免单点故障
单点故障是什么？
如果一个网络里，所有设备的通信都依赖于某一个节点（比如一台路由器），那么一旦这个节点出问题，整个网络就瘫痪，这就是 单点故障（Single Point of Failure, SPOF）。

举例：
普通 Wi-Fi 智能灯泡 → 必须通过家里的 Wi-Fi 路由器连接。
如果路由器坏了 / 断电 → 所有灯泡就失联，手机 App 也无法控制。

网状结构（Mesh Network）是什么？
在 Mesh 网络里，每个节点（设备）不仅能自己通信，还能帮“转发消息”。
所以设备之间不是星型（所有连中心），而是互相连成“网”。
这样就有多条路径到达目标设备。

A —— B —— C
 \       /
   —— D ——
如果 B 挂了，A 仍然可以通过 D → C 的路径到达 C。
网络自动重组，继续工作。


作用和好处
避免单点故障：没有某一个“必须存在”的中心节点，任意一条链路断开，网络仍能工作。
更大覆盖范围：每个节点都能帮忙转发信号，就像“中继站”，设备之间距离远也能互联。
自愈能力：一旦某个设备掉线，网络会自动寻找替代路径。
低功耗：尤其适合电池设备（传感器、门锁），因为它们只需要和邻居通信，不必发射很远。

在智能家居中的意义
如果你家里有 10 个 Thread 灯泡，它们会形成一个网状网络。
即便某个灯泡靠近的路由器坏了，它仍然可以通过别的灯泡转发信息，继续被控制。
这就是 Thread 提供的可靠性，相比 Wi-Fi/蓝牙单点依赖的模式更稳定。