==========音频的相关概念
常见的音频格式:
WAV
MP3
WMA
RA
APE
PCM
AAC

音频相关的参数:
采样率
比特率

1.常见的音频格式:
音频文件格式专指存放音频数据的文件的格式。
一般获取音频数据的方法是：采用固定的时间间隔，对音频电压采样（量化），并将结果以某种分辨率（例如：CDDA每个采样为16比特或2字节）存储。
采样的时间间隔可以有不同的标准，如CDDA采用每秒44100次；DVD采用每秒48000或96000次。
因此，采样率，分辨率和声道数目（例如立体声为2声道）是音频文件格式的关键参数。

有两类主要的音频文件格式：
无损格式，例如WAV，PCM，ALS，ALAC，TAK，FLAC，APE，WavPack(WV)
有损格式，例如MP3，AAC，WMA，Ogg Vorbis

有损文件格式是基于声学心理学的模型，除去人类很难或根本听不到的声音，例如：一个音量很高的声音后面紧跟着一个音量很低的声音。MP3就属于这一类文件。

无损的音频格式（例如FLAC）压缩比大约是2：1，解压时不会产生数据/质量上的损失，解压产生的数据与未压缩的数据完全相同。
如需要保证音乐的原始质量，应当选择无损音频编解码器。

WAV音频格式:
WAV是微软公司开发的一种声音文件格式，用于保存WINDOWS平台的音频信息资源，被WINDOWS平台及其应用程序所支持。
标准格式的WAV文件和CD格式一样，也是44.1K的采样频率，速率88K/秒，16位量化位数。

MP3音频格式:
MP3全称是动态影像专家压缩标准音频层面3（Moving Picture Experts Group Audio Layer III）。是当今较流行的一种数字音频编码和有损压缩格式，它设计用来大幅度地降低音频数据量，而对于大多数用户来说重放的音质与最初的不压缩音频相比没有明显的下降。
所谓的MP3也就是指的是MPEG标准中的音频部分，也就是MPEG音频层。
MP3格式中的数据通常由两部分组成，一部分为ID3用来存储歌名、演唱者、专辑、音轨数等信息，另一部分为音频数据。
音频数据部分以帧(frame)为单位存储，每个音频都有自己的帧头
MP3中的每一个帧都有自己的帧头，其中存储了采样率等解码必须的信息，所以每一个帧都可以独立于文件存在和播放，这个特性加上高压缩比使得MP3文件成为了音频流播放的主流格式。
帧头之后存储着音频数据，这些音频数据是若干个PCM数据帧经过压缩算法压缩得到的，对CBR的MP3数据来说每个帧中包含的PCM数据帧是固定的，而VBR是可变的。
它丢弃掉脉冲编码调制（PCM）音频数据中对人类听觉不重要的数据

WMA音频格式:
WMA(Windows Media Audio)，它是微软公司推出的与MP3格式齐名的一种音频格式。

RA音频格式:
RA的全称是RealAudio，是RealNetworks公司成熟的音频格式，它是一种可以在网络上实时传送和播放的音乐文件，是目前网络上比较流行的流媒体技术。

APE音频格式:
APE是Monkey's Audio提供的一种无损压缩格式。

PCM:
目前我们在计算机上进行音频播放都需要依赖于音频文件，音频文件的生成过程是将声音信息采样、量化和编码产生的数字信号的过程，人耳所能听到的声音，最低的频率是从20Hz起一直到最高频率20KHZ，因此音频文件格式的最大带宽是20KHZ。
根据奈奎斯特的理论，只有采样频率高于声音信号最高频率的两倍时，才能把数字信号表示的声音还原成为原来的声音，所以音频文件的采样率一般在40~50KHZ，比如最常见的CD音质采样率44.1KHZ。
对声音进行采样、量化过程被称为脉冲编码调制（Pulse Code Modulation），简称PCM。
PCM数据是最原始的音频数据完全无损，所以PCM数据虽然音质优秀但体积庞大，为了解决这个问题先后诞生了一系列的音频格式，这些音频格式运用不同的方法对音频数据进行压缩，其中有无损压缩（ALAC、APE、FLAC）和有损压缩（MP3、AAC、OGG、WMA）两种。

AAC音频格式:
AAC（Advanced Audio Coding），中文称为“高级音频编码”，出现于1997年，基于 MPEG-2的音频编码技术。目的是取代MP3格式。
2000年，MPEG-4标准出现后，AAC 重新集成了其特性，加入了SBR技术和PS技术，为了区别于传统的 MPEG-2 AAC 又称为 MPEG-4 AAC。
AAC号称“最大能容纳48通道的音轨，采样率达96 KHz，并且在320Kbps的数据速率下能为5.1声道音乐节目提供相当于ITU-R广播的品质”。
和MP3比起来，它的音质比较好，也能够节省大约30%的储存空间与带宽。
提升的压缩率：可以以更小的文件大小获得更高的音质，同样是128Kbps，AAC格式的音质明显好于MP3
支持多声道：可提供最多48个全音域声道
更高的解析度：最高支持96KHz的采样频率
提升的解码效率：解码播放所占的资源更少
AAC属于有损压缩的格式
AAC可以说是极为全面的编码方式，一方面，多声道和高采样率的特点使得它非常适合未来的DVD－Audio；另一方面，低码率下的高音质则使它也适合移动通讯、网络电话、在线广播等领域，真是全能的编码方式。

2.音频相关参数:
采样率:
采样率（也称为采样速度或者采样频率）定义了每秒从模拟信号中提取并组成数字信号的采样个数，它用赫兹（Hz）来表示。采样频率的倒数叫作采样周期或采样时间，它是采样之间的时间间隔。
采样频率只能用于周期性采样的采样器，对于非周期性采样的采样器没有规则限制

采样定理:
采样定理表明采样频率必须大于被采样信号带宽的两倍，另外一种等同的说法是奈奎斯特频率必须大于被采样信号的带宽。
如果信号的带宽是100Hz，那么为了避免混叠现象采样频率必须大于200Hz。换句话说就是采样频率必须至少是信号中最大频率分量频率的两倍，否则就不能从信号采样中恢复原始信号。
正常人听觉的频率范围大约是20HZ~20kHZ之间，根据奈奎斯特理论(只有采样频率高于声音信号最高频率的两倍时，才能把数字信号表示的声音还原成为原来的声音）,为了保证声音不失真，采样频率应该在40KHz左右。

在数字音频领域，常用的采样率有：
8,000 Hz  - 电话所用采样率，对于人的说话已经足够
11,025 Hz
22,050 Hz - 无线电广播所用采样率
32,000 Hz - miniDV数码视频camcorder、DAT（LP mode）所用采样率
44,100 Hz - 音频CD,也常用于MPEG-1音频（VCD, SVCD, MP3）所用采样率
47,250 Hz - Nippon Columbia（Denon）开发的世界上第一个商用PCM录音机所用采样率
48,000 Hz - miniDV、数字电视、DVD、DAT、电影和专业音频所用的数字声音所用采样率
50,000 Hz - 二十世纪七十年代后期出现的3M和Soundstream开发的第一款商用数字录音机所用采样率
50,400 Hz - 三菱X-80数字录音机所用所用采样率
96,000或者192,000 Hz - DVD-Audio、一些LPCM DVD音轨、Blu-ray Disc（藍光碟）音轨、和HD-DVD（高清晰度DVD）音轨所用所用采样率
2.8224 MHz - SACD、索尼和飞利浦联合开发的称为Direct Stream Digital的1位sigma-delta modulation过程所用采样率。

比特率:
比特率是指每秒传送的比特(bit)数。单位为 bps(Bit Per Second)，比特率越高，传送的数据越大，音质越好。

采样率和比特率对音频的影响:
采样率类似于动态影像的帧数，比如电影的采样率是24赫兹，PAL制式的采样率是25赫兹，NTSC制式的采样率是30赫兹。当我们把采样到的一个个静止画面再以采样率同样的速度回放时，看到的就是连续的画面。
同样的道理，把以44.1kHZ采样率记录的CD以同样的速率播放时，就能听到连续的声音。
显然，这个采样率越高，听到的声音和看到的图像就越连贯。
当然，人的听觉和视觉器官能分辨的采样率是有限的，基本上高于44.1kHZ采样的声音，绝大部分人已经觉察不到其中的分别了。
而声音的位数就相当于画面的颜色数，表示每个取样的数据量，当然数据量越大，回放的声音越准确，不至于把开水壶的叫声和火车的鸣笛混淆。
同样的道理，对于画面来说就是更清晰和准确，不至于把血和西红柿酱混淆。
不过受人的器官的机能限制，16位的声音和24位的画面基本已经是普通人类的极限了，更高位数就只能靠仪器才能分辨出来了。
比如电话就是3kHZ取样的7位声音，而CD是44.1kHZ取样的16位声音，所以CD就比电话更清楚。
比特率就很容易理解了.以电话为例，每秒3000次取样，每个取样是7比特，那么电话的比特率是21000。
而CD是每秒44100次取样，两个声道，每个取样是13位PCM编码，所以CD的比特率是44100*2*13=1146600
也就是说CD每秒的数据量大约是144KB，而一张CD的容量是74分等于4440秒，就是639360KB＝640MB

根据采样率和比特率算音频大小:
CD音质的文件：
44.1kHz * 16bit * 2通道 = 1411200 bit/s = 1411 kbps
这就是CD音质音频文件，每秒有141万位信息，换算一下： 1411200bps/8/1024/1024 = 0.168MB
一首3分钟20秒的音乐算下来就是33.6MB，这大概是无损音乐的大小。

==============================================================================================================
Format:AC-3
Format/Info:Audio Coding 3
Duration:33s 984ms
Bit rate:448 Kbps
Channel(s):6 channels
Channel positions: Front:L C R, Side:L R LFE
Sampling rate:48.0KHz
Bit depth:16bits
Frame rate:31.250 fps 

采样率(sampling rate)：声音信号在”模数”转换过程中单位时间内采样的次数。采样率是指每一次采样周期内声音模拟信号的数值，一般的采样率包括：8kHz/11.025kHz/22.05kHz/16kHz/37.8kHz/44.1kHz/48kHz。
帧率(Frame rate):每秒钟中帧数，单位是fps，如上面的 31.250 fps。
通道数(channels):声音的通道数，常用的有单声道和立体声之分。上面的声道数是 6 通道。
比特率(bit rate):每秒的传输速率(比特率)。
bitspersample:每个 sample 占用的 bits 数。


【音频】
指人耳可以听到的声音频率在20HZ~20kHz之间的声波，称为音频。

【采样频率】
来源：音频采样，是把声音从模拟信号转换为数字信号。
定义：采样率，就是每秒对声音进行采集的次数，同样也是所得的数字信号的每秒样本数。

常用的采样率有：
8,000 Hz - 电话所用采样率, 对于人的说话已经足够
11,025 Hz - AM调幅广播所用采样率
22,050 Hz和24,000 Hz - FM调频广播所用采样率
32,000 Hz - miniDV 数码视频 camcorder、DAT (LP mode)所用采样率
44,100 Hz - 音频 CD, 也常用于 MPEG-1 音频（VCD, SVCD, MP3）所用采样率
47,250 Hz - 商用 PCM 录音机所用采样率
48,000 Hz - miniDV、数字电视、DVD、DAT、电影和专业音频所用的数字声音所用采样率
50,000 Hz - 商用数字录音机所用采样率
96,000 或者 192,000 Hz - DVD-Audio、一些 LPCM DVD 音轨、BD-ROM（蓝光盘）音轨、和 HD-DVD （高清晰度 DVD）音轨所用所用采样率
2.8224 MHz - Direct Stream Digital 的 1 位 sigma-delta modulation 过程所用采样率。

采样频率大小意义：采样越高，声音的还原就越真实越自然，但同时它占的资源比较多。

人对频率的识别范围：是 20HZ - 20000HZ, 如果每秒钟能对声音做 20000 个采样, 回放时就足可以满足人耳的需求. 所以 22050 的采样频率是常用的, 44100已是CD音质, 超过48000的采样对人耳已经没有意义。这和电影的每秒 24 帧图片的道理差不多。

如果是双声道(stereo), 采样就是双份的, 文件也差不多要大一倍.

【声道】
当人听到声音时，能对声源进行定位，那么通过在不同的位置设置声源，就可以造就出更好的听觉感受，如果配合影像进行音频位置的调整，则会得到更好的视听效果。常见的声道有：

单声道，mono
双声道，stereo，最常见的类型，包含左声道以及右声道
2.1声道，在双声道基础上加入一个低音声道
5.1声道，包含一个正面声道、左前方声道、右前方声道、左环绕声道、右环绕声道、一个低音声道，最早应用于早期的电影院
7.1声道，在5.1声道的基础上，把左右的环绕声道拆分为左右环绕声道以及左右后置声道，主要应用于BD以及现代的电影院

【采样位数】
音频在经过采样得到样本后，还需要对该样本执行两个步骤：

1.量化。音频量化的量化位数常用的有：
每个采样数据记录的是振幅, 采样精度取决于采样位数的大小:
　　8bit (也就是1字节) 只能记录 256 个数, 也就是只能将振幅划分成 256 个等级;
　　16bit (也就是2字节) 可以细到 65536 个数, 这已是 CD 标准了;
　　32bit (也就是4字节) 能把振幅细分到 4294967296 个等级, 实在是没必要了.
量化位数又叫做采样位数、位深度、分辨率， 它是指声音的连续强度被数字表示后可以分为多少级。也可以说是声卡的分辨率，它的数值越大，分辨率也就越高，所发出声音的能力越强。

2.二进制编码。也就是把量化所得的结果，即单个声道的样本，以二进制的码字进行存放。

【帧】
音频在量化得到二进制的码字后，需要进行变换，而变换是以块为单位（block）进行的，一个块由多个（120或128）样本组成。而一帧内会包含一个或者多个块。帧的常见大小有960、1024、2048、4096等。一帧记录了一个声音单元，它的长度是样本长度和声道数的乘积。

帧(frame)是音频文件的最小的组成单位
一个音频音频帧的播放时长计算为：
音频帧的播放时间=每帧对应的采样样本的个数/采样频率(单位为s)
如果我们定义一个mp3的采样率为44.1khz，假设mp3格式的每帧采样点为1152个，则一个mp3音频帧的长度为，1152 /44100 *1000 =26.122ms。

不同的音频文件，音频的帧采样点是不一样的

【比特率】
每秒的传输速率(位速, 也叫比特率)。如705.6kbps 或 705600bps, 其中的 b 是 bit, ps 是每秒(per second)的意思，表示每秒705600bit的容量。压缩的音频文件常常用倍速来表示，譬如达到CD音质的MP3是128kbps/44100HZ。注意这里的单位是bit而不是Byte,一个Byte等于8个bit(位),bit是最小的单位，一般用于网络速度的描述和各种通信速度，Byte则用于计算硬盘，内存的大小。


【采样率、采样位数、比特率三者之间的关系】
比特率=采样率*采样位数*通道数

例：根据一个文件的大小推算出文件时长

譬如 “Windows XP 启动.wav” 的文件长度是 424,644 字节, 它是 “22050HZ / 16bit / 立体声” 格式(这可以从其 “属性->摘要” 里看到),

那么它的每秒的传输速率(位速, 也叫比特率、取样率)是 22050162 = 705600(bit/s), 换算成字节单位就是 705600/8 = 88200(字节/秒),
播放时间：424644(总字节数) / 88200(每秒字节数) ≈ 4.8145578(秒)。

但是这还不够精确, 包装标准的 PCM 格式的 WAVE 文件(.wav)中至少带有 42 个字节的头信息, 在计算播放时间时应该将其去掉,
所以就有：(424644-42) / (2205016*2/8) ≈ 4.8140816(秒). 这样就比较精确了。也就是：

（文件总大小 - 头信息）/ (采样率 * 采样位数 * 通道数 / 8) [也就是比特率] ≈ 文件时长。



dataFormat.mChannelsPerFrame = 1;// 每帧数据通道数：1 
dataFormat.mBitsPerChannel = 16;// 一帧数据中每个通道的样本数据位数: 16